<ion-view  view-title="Dasboard" ng-controller="DashboardCtrl"> 
<ion-header-bar align-title="center" class="common-header">
      <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
      <h1 class="title">Dasboard</h1>
</ion-header-bar>
<ion-content class="has-header main-content">
    <div class="row dashboard">
        <div class="col profileInfo">
            <img ng-src={{user.description.UserImage}} class="profilePic">
            <p>Welcome</p>
            <h3>{{user.description.FirstName}} {{user.description.LastName}}</h3>
            <p> Last Login : <span am-time-ago="user.description.LastLoginDate"></span></p>
        </div>
    </div>
    
    <div class="row request">
        <div class="col">
                <h3>New Request</h3>
            <form name="sendRequestform" novalidate >
            <div class="list">
          <label class="item item-input item-stacked-label">
            <span class="input-label">Subject<b class="mandotory_fields">*</b></span>
            <input type="text" class="input-control" name="requestsubject" placeholder="Enter the subject" ng-model="request.subject" required>
          </label>
          <label  class="request-errors" ng-show="sendRequestform.requestsubject.$error.required && sendRequestform.$submitted">
                    <span>Please Enter the Subject</span>
          </label>           
          <label class="item item-input item-stacked-label">
            <span class="input-label">Details<b class="mandotory_fields">*</b></span>
            <textarea placeholder="Please Enter the details" name="requestDetails" ng-model="request.detail" class="input-control" required></textarea>
          </label>
          <label class="request-errors" ng-show="sendRequestform.requestDetails.$error.required && sendRequestform.$submitted">
                    <span>Please Enter the details</span>
          </label>        
          <label class="item item-input item-stacked-label">
            <span class="input-label" ng-model="request.date">Preferred Date<b class="mandotory_fields">*</b></span>
            <input type="date" class="input-control" name="requestDate" ng-model="request.Date" min="{{date | date:'yyyy-MM-dd'}}" required>
          </label>
          <label  class="request-errors" ng-show="sendRequestform.requestDate.$error.required && sendRequestform.$submitted">
                    <span>Please enter your preferred Date</span>
          </label>        
          <label class="item item-input item-stacked-label">
            <span class="input-label" >Preferred Time<b class="mandotory_fields">*</b></span>
            <input type="time" class="input-control" name="requesttime" ng-change='checktime();' ng-model="request.time" ng-min="{{mintime | date:'hh:mm a'}}" required>
          </label>
<!--
          <label  class="request-errors" ng-show="sendRequestform.requesttime.$error.required && sendRequestform.$submitted">
                    <span>Please Enter your preferred Time</span>
          </label>
-->
          <label ng-messages="sendRequestform.$submitted && sendRequestform.requesttime.$error" style="color:#F70000" role="alert">
                    <span ng-message="required">Please Enter your preferred Time</span>
                    <span ng-message="min">Please give a gap of 2 hours</span>
<!--                    <span ng-message="maxlength">Your first name is too long</span>-->
          </label>        
<!--
          <label  class="request-errors" ng-show="sendRequestform.requesttime.$error.min && sendRequestform.$submitted">
                    <span>Please give a gap of 2 hours</span>
          </label>        
-->
          <div class="row" ng-show="showaddedaddress">
              <div class="col">
                <label class="item item-input item-stacked-label">
                <span class="input-label">Address Line 1</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.address1" required>
              </label>        
              <label class="item item-input item-stacked-label">
                <span class="input-label">Address Line 2</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.address2" required>
              </label>        
              <label class="item item-input item-stacked-label">
                <span class="input-label">City</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.city" required>
              </label>        
              <label class="item item-input item-stacked-label">
                <span class="input-label">State</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.state" required>
              </label>        
              <label class="item item-input item-stacked-label">
                <span class="input-label">Postal Code</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.postal" required>
              </label>        
              <label class="item item-input item-stacked-label">
                <span class="input-label">Country</span>
                <input type="text" class="input-control" name="requestSubject" placeholder="Enter the subject" ng-model="request.country" required>
              </label>      
            </div>
          </div>      
                 
          
              <div class="row">
                <div class="col" ng-repeat="image in images" >
                    <img ng-src="data:image/jpeg;base64,{{image}}" style='height:100px;' />
                </div>
              </div> 
                
               
         <div class="row">
            <div class="col col-50">
            <button class="button button-block button-mysmall" type="button" ng-click="addAddress();">Add Address</button>
            
            </div>       
            <div class="col col-50">
                <button class="button button-block button-mysmall" type="button" ng-click="usecurrentLocation();">Use Current Location</button> 
            </div>       
         </div> 
         <div class="row">
            <div class="col col-50">
            <button class="button button-block button-mybuttoncolor" type="button" ng-click="takePicture()">Add image</button>
            
            </div>       
            <div class="col col-50">
                <button class="button button-block button-mybuttoncolor" type="submit" ng-click='sendRequestform.$valid &&  sendRequest(request);'>Send Request</button> 
            </div>       
         </div>           
        </div>
            </form>        
        </div>
       

    </div>
     
</ion-content>

</ion-view>    
